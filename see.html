<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>视听室</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="text/javascript" src="js/jquery-1.12.1.js"></script>
</head>
<body>
<div class="all" style="height: 100%;">
	<div class="titl">
		<h1>盐田图书馆智能取号系统</h1>
		<h3>YANTIAN&nbsp;LIBRARY&nbsp;INTELLIGENT&nbsp;TICKET&nbsp;SYATEM</h3>
	</div>
	<!-- 标题 -->
	<div class="bigp">
			<img src="images/seeban.jpg">
	</div>
	<!-- 影院大图 -->
	<div class="quhao">
		<div class="quhao_b">
			<img src="images/seap.jpg">
			<p>视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室视听室</p>
			<div id="getnum">我要取号</div>
		</div>
	</div>
	<!-- 按钮 -->
	<div class="foo">
		<ul>
			<li>
				<div>
				<img src="images/sea.png">
				</div>
			</li>
			<li>
				<div>
				<img src="images/set.png">
				</div>
			</li>
			<li>
				<div>
				<img src="images/see.png">
				</div>
			</li>
		</ul>
	</div>
	<!-- 底部图片 -->
</div>
<div id="div" style="position:absolute; width:130px;height:130px;border-radius: 50%;background-color: rgba(255,255,255,0.3);position: absolute;bottom: 50%;right: 0;">
			<p id='title' style="background-color: rgba(255,255,255,0.8);
			width:110px;height:110px;border-radius: 50%;margin: 10px;line-height: 110px;text-align: center;font-family: '黑体';font-size: 25px; ">
				返回首页
			</p>
		</div>
		<!-- 拖动 -->
</body>
<script type="text/javascript">
	$(function(){
		var wid = $("body").width();
		
		$("body").height(wid*1.78);
	})
</script>
<script type="text/javascript">
	(function ($) {
    if ((typeof $) == "undefined" || !$) {
        throw "Please refer to jQuery file!";
    }
    var settings = {
        container: null, //父级容器对象
        callback: null,  //回调函数
        direction: null, //[null,'X','Y']
        area: []//[minX,maxX,minY,maxY]
    };
    //获取鼠标位置
    var getCursorPos = function (e) {        
        if (e.pageX || e.pageY) {
            return { x: e.pageX, y: e.pageY };
        }
        var _body = document.body;
        return {
            x: e.clientX + _body.scrollLeft - _body.clientLeft,
            y: e.clientY + _body.scrollTop - _body.clientTop
        };
    };

    $.fn.dragdrop = function (options) {
        var setting = $.extend({}, settings, options);

        //返回JQuery链式引用
        return this.each(function () {
            var canMoving = false,
                offset = { innerTop: 0, innerLeft: 0, offsetTop: 0, offsetLeft: 0 },
                container = null,
                _self = $(this);            
            container = setting.container ? $(setting.container, _self) : _self;
            container.css({ "position": "absolute" });

            //bind事件
            _self.on("mousedown", function (e) {
                canMoving = true;
                container.css("cursor", "move");
                var pos = getCursorPos(e),
                    temp = setting.container.position();
                if (container.get(0).setCapture) {
                    container.get(0).setCapture();
                }
                //记录鼠标按下时，鼠标相对于移动对象原点的距离.
                offset.innerLeft = pos.x - temp.left;
                offset.innerTop = pos.y - temp.top;
            });
            $(document).on("mousemove", function (e) {                
                if (canMoving) {                    
                    var pos = getCursorPos(e);
                    //记录鼠标移动偏移量
                    offset.offsetLeft = pos.x - offset.innerLeft;
                    offset.offsetTop = pos.y - offset.innerTop;
                    //限制                    
                    if (setting.area != null && setting.area.length == 4) {
                        if (offset.offsetLeft < parseInt(setting.area[0])) {
                            offset.offsetLeft = parseInt(setting.area[0]);
                        }
                        else if (offset.offsetLeft > parseInt(setting.area[1])) {
                            offset.offsetLeft = parseInt(setting.area[1]);
                        }
                        else if (offset.offsetTop < parseInt(setting.area[2])) {
                            offset.offsetTop = parseInt(setting.area[2]);
                        }
                        else if (offset.offsetTop > parseInt(setting.area[3])) {
                            offset.offsetTop = parseInt(setting.area[3]);
                        }
                    }

                    switch (setting.direction) {
                        case "X":
                            container.css("left", offset.offsetLeft);
                            break;
                        case "Y":
                            container.css("top", offset.offsetTop);
                            break;
                        default:
                            container.css({ "top": offset.offsetTop, "left": offset.offsetLeft });
                            break;
                    }
                    if (setting.callback) {
                        setting.callback.call(setting.callback, offset);
                    }
                }
            });
            $(document).on("mouseup", function () {
                canMoving = false;
                container.css("cursor", "default");
                if (container.get(0).releaseCapture) {
                    container.get(0).releaseCapture();
                }
            });

        });
    };

})(jQuery);

$(function(){
	
	$("#title").dragdrop({container:$("#div")});
	
});
</script>
</html>